'use strict';

var unifyModule = angular.module('UnifyApp', [
            //'ngResource',
            //'ngRoute',
            'ui.router',
            'ui.bootstrap'
        ]).
        constant('appConstants', {
            // All app constants goes here
            APP_CONFIG          : APP_CONFIG,
            authenticity_token  : FORM_AUTHENTICITY_TOKEN // Defined at layout level
        }).
        config(['$stateProvider', '$urlRouterProvider', '$locationProvider',
            function ($stateProvider, $urlRouterProvider, $locationProvider) {
                $locationProvider.html5Mode(true);
                $urlRouterProvider.otherwise('/');
                $stateProvider.state('index', {
                    url: '/',
                    views: {
                        'index': {
                            controller: 'IndexCtrl',
                            templateUrl: '<%= asset_path('templates/index.html') %>'
                        },
                        'hero@index': {
                            controller: 'HeroCtrl',
                            templateUrl: '<%= asset_path('partials/hero.html') %>'
                        },
                        'login@index': {
                            controller: 'LoginCtrl',
                            templateUrl: '<%= asset_path('partials/common/login.html') %>'
                        },
                        'registration@index': {
                            controller: 'RegistrationCtrl',
                            templateUrl: '<%= asset_path('partials/common/registration.html') %>'
                        },
                        'features@index': {
                            templateUrl: '<%= asset_path('partials/features.html') %>'
                        },
                        'faq@index': {
                            templateUrl: '<%= asset_path('partials/common/faq.html') %>'
                        },
                        'footer@index': {
                            templateUrl: '<%= asset_path('partials/common/footer.html') %>'
                        }
                    }
                }).state('search', {
                    url: '/search',
                    views: {
                        'search': {
                            templateUrl: '<%= asset_path('templates/search.html') %>'
                        },
                        'header@search': {
                            templateUrl: '<%= asset_path('partials/search/header.html') %>'
                        },
                        'results@search': {
                            templateUrl: '<%= asset_path('partials/search/results.html') %>'
                        },
                        'footer@search': {
                            templateUrl: '<%= asset_path('partials/common/footer.html') %>'
                        }
                    }
                }).state('bureau', {
                    url: '/:bureau',
                    views: {
                        'bureau': {
                            controller: 'IndexCtrl',
                            templateUrl: '<%= asset_path('templates/bureau.html') %>'
                        },
                        'header@bureau': {
                            templateUrl: '<%= asset_path('partials/bureau/header.html') %>'
                        },
                        'login@bureau': {
                            controller: 'LoginCtrl',
                            templateUrl: '<%= asset_path('partials/common/login.html') %>'
                        },
                        'registration@bureau': {
                            templateUrl: '<%= asset_path('partials/bureau/registration.html') %>'
                        },
                        'hero@bureau': {
                            templateUrl: '<%= asset_path('partials/bureau/hero.html') %>'
                        },
                        'success@bureau': {
                            templateUrl: '<%= asset_path('partials/bureau/success.html') %>'
                        },
                        'candidates@bureau': {
                            templateUrl: '<%= asset_path('partials/bureau/candidates.html') %>'
                        },
                        'faq@bureau': {
                            templateUrl: '<%= asset_path('partials/common/faq.html') %>'
                        },
                        'footer@bureau': {
                            templateUrl: '<%= asset_path('partials/common/footer.html') %>'
                        }
                    }
                });
            }]).run(['$rootScope', '$state', '$stateParams',
                    function($rootScope, $state, $stateParams) {
                        $rootScope.loginFormVisible = false;
                        $rootScope.registrationFormVisible = false;
                }]);